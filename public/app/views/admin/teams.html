<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12">
      <div class="panel panel-blue">
        <div class="panel-heading">
          <h2 class="subtitle text-center">Filtros</h2>
        </div>
        <div class="panel-body">
          <div>
            <h4>Ciudad</h4>
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('cities', 'La Paz')"> La Paz <br />
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('cities', 'El Alto')"> El Alto  <br />
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('cities', 'Pando')"> Pando <br />
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('cities', 'Cochabamba')"> Cochabamba <br />
          </div>
          <div>
            <h4>División</h4>
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('divisions', 'Junior (de 10 a 14 años)')"> Junior <br />
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('divisions', 'Senior (de 15 a 18 años)')"> Senior
          </div>
          <!-- <div>
            <h4>Categoría</h4>
            <input type="checkbox" ng-checked="true" ng-click="vm.updateFilter('categories', 'Educación')">Educación <br />
            <input type="checkbox" ng-checked="false" ng-click="vm.updateFilter('categories', 'Violencia contra la niñez')">Violencia contra la niñez<br />
            <input type="checkbox" ng-checked="false" ng-click="vm.updateFilter('categories', 'Bienestar y salud')"> Bienestar y salud<br />
          </div>
          <div>
            <h4>Equipos que</h4>
            <input type="radio" ng-value="true" ng-model="vm.filters.teamThat.requestMembers"> Necesitan participantes <br />
            <input type="radio" ng-value="false" ng-model="vm.filters.teamThat.requestMembers"> No necesitan más participantes <br />
            <input type="radio" ng-value="true" ng-model="vm.filters.teamThat.requestMentors"> Necesitan mentor <br />
            <input type="radio" ng-value="false" ng-model="vm.filters.teamThat.requestMentors"> No necesitan mentor <br />
          </div> -->
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-12">
      <div class="row" ng-if="vm.isLoading">
        <div class="col-xs-12">
          <h1 class="text-center" style="font-size:75px"><i class="fa fa-circle-o-notch fa-spin" ></i></h1>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="col-xs-6 col-sm-3">
            <h3 class="right">Total equipos: {{ vm.filtered.length }}</h3>
          </div>
          <div class="col-xs-6 col-sm-3">
            <h4 class="right">Total equipos La Paz: {{ vm.counters.teamsLP }}</h4>
            <h4 class="right">Total equipos El Alto: {{ vm.counters.teamsEA }}</h4>
          </div>
          <div class="col-xs-6 col-sm-3">
            <h4 class="right">Total mentores La Paz: {{ vm.counters.mentorsLP }}</h4>
            <h4 class="right">Total mentores El Alto: {{ vm.counters.mentorsEA }}</h4>
          </div>
          <div class="col-xs-6 col-sm-3">
            <h4 class="right">Total estudiantes La Paz: {{ vm.counters.studentsLP }}</h4>
            <h4 class="right">Total estudiantes El Alto: {{ vm.counters.studentsEA }}</h4>
          </div>
          <div class="col-xs-6 col-sm-3 col-sm-offset-3">
            <h4 class="right">Total estudiantes mujeres: {{ vm.counters.studentsFem }}</h4>
            <h4 class="right">Total estudiantes hombres: {{ vm.counters.studentsMas }}</h4>
          </div>
          <div class="col-xs-6 col-sm-3">
            <h4 class="right">Total mentores mujeres: {{ vm.counters.mentorsFem }}</h4>
            <h4 class="right">Total mentores hombres: {{ vm.counters.mentorsMas }}</h4>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="col-xs-12 col-sm-4">
            <h3 class="text-center" style="color:#229ED7;">Gráficas Equipos</h3>
            <canvas id="doughnut1" class="chart chart-doughnut"
              chart-data="vm.chart.data.teams" chart-labels="vm.chart.labels.teams">
            </canvas>
          </div>
          <div class="col-xs-12 col-sm-4 ">
            <h3 class="text-center" style="color:#229ED7;">Gráficas Estudiantes</h3>
            <canvas id="doughnut2" class="chart chart-doughnut"
              chart-data="vm.chart.data.students" chart-labels="vm.chart.labels.students">
            </canvas>
          </div>
          <div class="col-xs-12 col-sm-4 ">
            <h3 class="text-center" style="color:#229ED7;">Gráficas Mentores</h3>
            <canvas id="doughnut3" class="chart chart-doughnut"
              chart-data="vm.chart.data.mentors" chart-labels="vm.chart.labels.mentors">
            </canvas>
          </div>
        </div>
        <div class="col-xs-12" style="padding-top:20px;padding-bottom:20px">
          <div class="col-xs-8 col-sm-10">
            <div class="input-group">
              <span class="input-group-addon"><i class="fa fa-search"></i></span>
              <input type="text" class="form-control" placeholder="Buscar equipo" ng-model="vm.teamFilter">
            </div>
          </div>
          <div class="col-xs-4 col-sm-2">
            <a type="button" class="btn btn-sm btn-success" href="{{vm.url}}&cities={{vm.filters.cities}}&divisions={{vm.filters.divisions}}&teamname={{vm.teamFilter}}" target="_blank"><i class="fa fa-file-excel-o"></i> Reporte</a>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="panel-group">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h3>Equipos</h3>
              </div>
              <div class="panel-body">
                <div class="table-responsive">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th class="text-center">Nombre</th>
                        <th class="text-center">Categoría</th>
                        <th class="text-center">División</th>
                        <th class="text-center">Ciudad</th>
                        <th class="text-center">Tiene mentor</th>
                        <th class="text-center">Mentor</th>
                        <th class="text-center">Estudiantes</th>
                        <th class="text-center" ng-if="vm.userCreds.role == 5">Eliminar</th>
                        <th class="text-center" ng-if="vm.userCreds.role == 5">Añadir experto</th>
                        <th class="text-center">Docs. subidos</th>
                      </tr>
                      <tr>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td class="text-center">
                          <table>
                            <tr style="width:150px;">
                              <th class="text-center" style="width:100px;">Nombre</th>
                              <th class="text-center" style="width:100px;">Edad</th>
                              <th class="text-center" style="width:100px;">Ciudad</th>
                            </tr>
                          </table>
                        </td>
                        <td class="text-center">
                          <table>
                            <tr style="width:200px;">
                              <th class="text-center" style="width:100px;">Nombre</th>
                              <th class="text-center" style="width:100px;">Edad</th>
                              <th class="text-center" style="width:100px;">Ciudad</th>
                              <th class="text-center" style="width:100px;">Colegio</th>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </thead>
                    <tbody>
                      <tr ng-repeat="team in vm.filtered = (vm.teams.teams | TeamAdminFilter: vm.filters.cities : vm.filters.divisions | filter:vm.teamFilter)">
                        <td class="text-center">{{ team.team_name }}</td>
                        <td class="text-center">{{ team.category.nombre }}</td>
                        <td class="text-center">{{ team.division.nombre }}</td>
                        <td class="text-center">{{ team.city.nombre }}</td>
                        <td class="text-center">{{ team.has_mentor ? 'Sí' : 'No' }}</td>
                        <td>
                          <table>
                            <tr ng-repeat="member in team.members.mentors track by $index" style="border-bottom:1px solid black;">
                              <td> <strong>{{ $index + 1 }}</strong>. {{ member.names + ' ' + member.lastnames }} ({{ member.gender }})</td>
                              <td style="width:150px;" class="text-center">
                                  {{ member.age }} </br>
                                  {{ member.birth_date }}
                              </td>
                              <td style="width:150px;" class="text-center"> {{member.city}} </td>
                            </tr>
                          </table>
                        </td>
                        <td>
                          <table>
                            <tr ng-repeat="member in team.members.students track by $index" style="border-bottom:1px solid black;">
                              <td><strong>{{ $index + 1 }}</strong>.  {{ member.names + ' ' + member.lastnames }} ({{ member.gender }} - {{ member.division }}) </td>
                              <td style="width:120px;" class="text-center">
                                  {{ member.age }} </br>
                                  {{ member.birth_date }}
                              </td>
                              <td style="width:60px;" class="text-center">{{member.city}}</td>
                              <td style="width:100px;" class="text-center">{{member.school}}</td>
                            </tr>
                          </table>
                        </td>
                        <td><button type="button" ng-if="vm.userCreds.role == 5" class="btn btn-danger btn-sm" ng-click="vm.deleteTeam(team.id)"><i class="fa fa-times"></i></button></td>
                        <td><button type="button" ng-if="vm.userCreds.role == 5" class="btn btn-info btn-sm" ng-click="vm.selectTeam(team.id, team.team_name)" data-target="#selectExpert" data-toggle="modal"><i class="fa fa-user"></i></button></td>
                        <td>
                          <ol style="padding: 20px;">
              							<li ng-if="!team.youtube_videos[0].id" class="text-danger" ><i class="fa fa-times-circle-o "></i> Video demo app</li>
              							<li ng-if="team.youtube_videos[0].id"  class="text-success "><i class="fa fa-check-circle-o"></i> Video demo app </li>
              							<li ng-if="!team.youtube_videos[1].id" class="text-danger" ><i class="fa fa-times-circle-o "></i> Video pitch de negocios</li>
              							<li ng-if="team.youtube_videos[1].id"  class="text-success "><i class="fa fa-check-circle-o"></i> Video pitch de negocios </li>
              							<li ng-if="!team.app_doc" class="text-danger"><i class="fa fa-times-circle-o "></i> Documento PDF de proyecto</li>
              							<li ng-if="team.app_doc"  class="text-success "><i class="fa fa-check-circle-o"></i> Documento PDF de proyecto </li>
              							<li ng-if="!team.app_apk" class="text-danger" ><i class="fa fa-times-circle-o "></i> Archivo APK de proyecto</li>
              							<li ng-if="team.app_apk"  class="text-success "><i class="fa fa-check-circle-o"></i> Archivo APK de proyecto </li>
              						</ol>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="selectExpert" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h2 class="modal-title text-center">Asignar experto a equipo <br> {{ vm.assignExpert.team.name }}</h2>
      </div>
      <form class="form-horizontal" name="loginForm" ng-submit="vm.assignExpertToTeam()">
      <div class="modal-body">
          <div class="form-group">
            <div class="col-xs-12 col-sm-8 col-sm-offset-2">
              <label for="selectexpert" class="col-xs-12 col-sm-12 ">Lista de expertos</label>
              <div class="col-xs-12 col-sm-12">
                <select id="selectexpert"
                  ng-options="expert.expert.id as expert.full_name for expert in vm.experts"
                  ng-model="vm.assignExpert.expert.id"
                  class="form-control" ></select>
              </div>
            </div>
        </div>
        <div class="alert alert-danger text-center"
          ng-if="vm.assignExpert.action.state">
          <strong>{{ vm.assignExpert.action.msg }}</strong>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
        <button type="submit"
          ng-disabled="vm.assignExpert.action.isLoading"
          class="btn btn-success">
            <i ng-class="!vm.assignExpert.action.isLoading ? 'fa fa-user' : 'fa fa-circle-o-notch fa-spin'"></i> Asignar experto
          </button>
      </div>
    </div>
    </form>
  </div>
</div>
