!function(){"use strict";function e(e,t,i,s,n,a,o){function r(){i.getQuestions(o.checkpointId).then(function(e){e.success?f.questions=e.questions:alert(e.msg)},function(e){})}function u(){i.getCheckpoint(o.id,o.checkpointId).then(function(e){e.success?f.checkpoint=e.checkpoint:alert(e.msg)},function(e){})}function c(){if(0==f.checkpointQuestions.length)return f.isUploaded.state=!0,void(f.isUploaded.msg="Debes crear almenos una pregunta");f.isUploaded.isLoading=!0,f.isUploaded.state=!1,i.createQuestions(o.checkpointId,{questions:f.checkpointQuestions}).then(function(e){e.success?(f.getQuestions(),f.checkpointQuestions=[]):(f.isUploaded.isLoading=!1,f.isUploaded.state=!0,f.isUploaded.msg=e.msg)},function(e){f.isUploaded.isLoading=!1})}function d(){f.checkpointQuestions.push({id:Date.now(),type:{id:0,label:"Ninguno"},question:""})}function l(e){for(var t=0,i=0;i<f.checkpointQuestions.length;i++)if(f.checkpointQuestions[i].id==e){t=i;break}f.checkpointQuestions.splice(t,1)}function g(e){n.open(e)}function m(e,t){"BEGIN"==t?(f.newStage.beginDate.date=e,f.newStage.beginDate.formatted=moment(e).locale(f.newStage.locale).format("L")):(f.newStage.endDate.date=e,f.newStage.endDate.formatted=moment(e).locale(f.newStage.locale).format("L"))}var f=this;f.checkpoint={},f.questions=[],f.checkpointQuestions=[],f.isUploaded={state:!1,msg:"",isLoading:!1},f.getCheckpoint=u,f.getQuestions=r,f.addQuestion=d,f.deleteQuestion=l,f.createQuestions=c,f.openDatePicker=g,f.datePickerCallback=m,f.getQuestions(),f.getCheckpoint()}angular.module("heroesDigitalesApp").controller("CheckpointAdminCtrl",["User","Auth","Checkpoint","LxNotificationService","LxDatePickerService","$state","$stateParams",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){i.getStages().then(function(e){e.success?d.stages=e.stages:alert(e.msg)},function(e){})}function r(e){n.open(e)}function u(e,t){"BEGIN"==t?(d.newStage.beginDate.date=e,d.newStage.beginDate.formatted=moment(e).locale(d.newStage.locale).format("L")):(d.newStage.endDate.date=e,d.newStage.endDate.formatted=moment(e).locale(d.newStage.locale).format("L"))}function c(){d.isUploaded.isLoading=!0,d.isUploaded.state=!1;var e={name:d.newStage.name,desc:d.newStage.desc,beginDate:d.newStage.beginDate.formatted.split("/").reverse().join("-"),endDate:d.newStage.endDate.formatted.split("/").reverse().join("-")};i.createStage(e).then(function(e){e.success?a.go("admin.stage",{id:e.stageId}):(d.isUploaded.isLoading=!1,d.isUploaded.state=!0,d.isUploaded.msg=e.msg)},function(e){})}var d=this;d.stages=[],d.newStage={name:"",desc:"",locale:"es",minDate:new Date((new Date).getFullYear(),(new Date).getMonth()-2,(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth()+6,(new Date).getDate()),beginDate:{id:"_begin",date:new Date,formatted:moment().locale("es").format("L")},endDate:{id:"_end",date:new Date,formatted:moment().locale("es").format("L")}},d.isUploaded={state:!1,msg:"",isLoading:!1},d.getStages=o,d.openDatePicker=r,d.datePickerCallback=u,d.createStage=c,d.getStages()}angular.module("heroesDigitalesApp").controller("CreateStageAdminCtrl",["User","Auth","Stage","LxNotificationService","LxDatePickerService","$state",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){i.getStages().then(function(e){e.success?o.stages=e.stages:alert(e.msg)},function(e){})}var o=this;o.userCreds=t.getSession(),o.userData={},o.stages=[],o.getStages=a,o.getStages()}angular.module("heroesDigitalesApp").controller("DashboardAdminCtrl",["User","Auth","Stage","LxNotificationService","$state",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){s.getExperts().then(function(e){e.success?u.experts=e.experts:alert(e.msg)},function(e){})}function r(e,t){var i=t?"Esta seguro que desea aprobarlo para ser juez/experto?":"Esta seguro que desea rechazarlo para ser juez/experto?";a.confirm(i,"",{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(i){if(i){var s={id:e,accept:t};n.confirmRequest(s).then(function(e){e.success?(u.getExperts(),u.getJudges(),a.success("La acción fue realizada con éxito")):a.warn("Hubo un error al realizar la acción")},function(e){a.error("Hubo un error al realizar la acción")})}})}var u=this;u.userCreds=t.getSession(),u.userData={},u.experts=[],u.getExperts=o,u.processRequest=r,u.getExperts()}angular.module("heroesDigitalesApp").controller("ExpertAdminCtrl",["User","Auth","Team","Expert","Request","LxNotificationService",e])}(),function(){"use strict";function e(e){function t(){e.logout()}var i=this;i.userCreds=e.getSession(),i.logout=t}angular.module("heroesDigitalesApp").controller("HeaderAdminCtrl",["Auth",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){s.getJudges().then(function(e){e.success?u.judges=e.judges:alert(e.msg)},function(e){})}function r(e,t){var i=t?"Esta seguro que desea aprobarlo para ser juez/experto?":"Esta seguro que desea rechazarlo para ser juez/experto?";a.confirm(i,"",{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(i){if(i){var s={id:e,accept:t};n.confirmRequest(s).then(function(e){e.success?(u.getExperts(),u.getJudges(),a.success("La acción fue realizada con éxito")):a.warn("Hubo un error al realizar la acción")},function(e){a.error("Hubo un error al realizar la acción")})}})}var u=this;u.userCreds=t.getSession(),u.userData={},u.judges=[],u.getJudges=o,u.processRequest=r,u.getJudges()}angular.module("heroesDigitalesApp").controller("JudgeAdminCtrl",["User","Auth","Team","Judge","Request","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i){function s(){n.loginAdminState.isNotLogged=!1,n.loginAdminState.isLoading=!0,i.login(n.creds).then(function(t){t.success?(i.setSession(t.uid,t.rid,t.username,t.token,t.min_fields,t.has_team,t.team_id,t.is_leader),e.go(t.path)):(n.loginAdminState.isNotLogged=!0,n.loginAdminState.isLoading=!1,n.loginAdminState.msg=t.msg)},function(e){})}var n=this;n.creds={email:"",password:""},n.loginAdminState={isNotLogged:!1,msg:"",isLoading:!1},n.loginAdmin=s}angular.module("heroesDigitalesApp").controller("LoginAdminCtrl",["$state","$timeout","Auth",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o){function r(){n.getMentorsAdmin(c.currentPage).then(function(e){if(e.success){c.isLoading=!1,c.mentors=e.mentors,c.total=e.pages;for(var t=0;t<e.pages;t++)c.pagination.push(t+1)}else alert(e.msg)},function(e){alert("Hubo un error al obtener a los mentores")})}function u(e,i){var s=i?"¿Está seguro de aprobar al estudiante?":"¿Está seguro de eliminar al estudiante?",n=i?"El estudiante podrá acceder a su sesión":"El estudiante ya no podrá iniciar sesión";o.confirm(s,n,{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(s){s&&t.confirmUser({uid:e,action:i}).then(function(t){if(t.success){o.success(t.msg);for(var s=0;s<c.mentors.length;s++)if(c.mentors[s].id==e){c.mentors[s].is_active=i;break}}else o.warning("No se actualizo al usuario, intente nuevamente")},function(e){o.error("Hubo un error al actualizar al usuario")})})}var c=this;c.userCreds=i.getSession(),c.userData={},c.mentors=[],c.isLoading=!0,c.getMentors=r,c.approve=u,c.total=0,c.pagination=[],c.currentPage=e.num,c.getMentors()}angular.module("heroesDigitalesApp").controller("MentorAdminCtrl",["$stateParams","User","Auth","Team","Mentor","Request","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o,r){function u(){s.getCheckpoints(r.id).then(function(e){e.success?m.checkpoints=e.checkpoints:alert(e.msg)},function(e){})}function c(){i.getStage(r.id).then(function(e){e.success&&(m.stage=e.stage)},function(e){})}function d(e){a.open(e)}function l(e,t){"EVAL"==t&&(m.newCheckpoint.evalDate.date=e,m.newCheckpoint.evalDate.formatted=moment(e).locale(m.newCheckpoint.locale).format("L"))}function g(){m.isUploaded.isLoading=!0,m.isUploaded.state=!1;var e={stageId:r.id,name:m.newCheckpoint.name,evalDate:m.newCheckpoint.evalDate.formatted.split("/").reverse().join("-")};s.createCheckpoint(e).then(function(e){e.success?o.go("admin.stage.checkpoint",{stageId:r.id,checkpointId:e.checkId}):(m.isUploaded.isLoading=!1,m.isUploaded.state=!0,m.isUploaded.msg=e.msg)},function(e){})}var m=this;m.checkpoints=[],m.stage={},m.isUploaded={state:!1,msg:"",isLoading:!1},m.newCheckpoint={name:"",locale:"es",minDate:new Date((new Date).getFullYear(),(new Date).getMonth()-6,(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth()+6,(new Date).getDate()),evalDate:{id:"_eval",date:new Date,formatted:moment().locale("es").format("L")}},m.getCheckpoints=u,m.getStage=c,m.openDatePicker=d,m.datePickerCallback=l,m.createCheckpoint=g,m.getCheckpoints(),m.getStage()}angular.module("heroesDigitalesApp").controller("StageAdminCtrl",["User","Auth","Stage","Checkpoint","LxNotificationService","LxDatePickerService","$state","$stateParams",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o){function r(){n.getStudentsAdmin(g.currentPage).then(function(e){if(e.success){g.isLoading=!1,g.students=e.students,g.total=e.pages;for(var t=0;t<e.pages;t++)g.pagination.push(t+1)}else alert(e.msg)},function(e){alert("Hubo un error al obtener los datos de los estudiantes")})}function u(e){n.getStudentParents(e).then(function(e){e.success?(g.studentParent.names=e.student_names,g.studentParent.lastnames=e.student_lastnames,g.studentParent.student_id=e.student_id,"NONE"==e.code?(g.studentParent.isAny=!1,g.studentParent.msg=e.msg):(g.studentParent.isAny=!0,g.studentParent.parents=e.parents,g.studentParentSignature.id=e.parents.id)):o.warning("Intente cargar nuevamente los datos del usuario")},function(e){o.error("Hubo un error al obtener los datos del usuario")})}function c(e,t){var i=g.filters[e].indexOf(t);-1==i?g.filters[e].push(t):g.filters[e].splice(i,1)}function d(e,i){var s=i?"¿Está seguro de aprobar al estudiante?":"¿Está seguro de eliminar al estudiante?",n=i?"El estudiante podrá acceder a su sesión":"El estudiante ya no podrá iniciar sesión";o.confirm(s,n,{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(s){s&&t.confirmUser({uid:e,action:i}).then(function(t){if(t.success){o.success(t.msg);for(var s=0;s<g.students.length;s++)if(g.students[s].id==e){g.students[s].is_active=i;break}}else o.warning("No se actualizo al usuario, intente nuevamente")},function(e){o.error("Hubo un error al actualizar al usuario")})})}function l(){if(""==g.studentParentSignature.signature.trim())return g.studentParent.isSigned.state=!0,void(g.studentParent.isSigned.msg="Debe llenar la firma del padre/tutor");n.authParent(g.studentParentSignature).then(function(e){if(e.success){o.success(e.msg);for(var t=0;t<g.students.length;t++)if(g.students[t].id==g.studentParent.student_id){g.students[t].student.authorization={active:!0,signature:g.studentParentSignature.signature};break}}else o.warning(e.msg)},function(e){o.error("Hubo un error al actualizar al usuario")})}var g=this;g.userCreds=i.getSession(),g.userData={},g.students=[],g.isLoading=!0,g.studentParent={names:"",lastnames:"",isAny:!1,msg:"",parents:{},isSigned:{state:!1,msg:""}},g.studentParentSignature={id:0,signature:""},g.filters={cities:["La Paz","El Alto"],gender:["Femenino","Masculino"],withTeam:!0},g.total=0,g.pagination=[],g.currentPage=e.num,g.getStudents=r,g.updateFilter=c,g.approve=d,g.getStudent=u,g.confirmParent=l,g.getStudents()}angular.module("heroesDigitalesApp").controller("StudentAdminCtrl",["$stateParams","User","Auth","Team","Student","Request","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s){function n(){i.getTeamsAdmin().then(function(e){e.success?(r.isLoading=!1,r.teams=e.teams):s.warn(e.msg)},function(e){s.error(e)})}function a(e){s.confirm("¿Está seguro de borrar al equipo?","Todos los miembros del equipo serán dados de baja del equipo, y este no será visible",{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(t){t&&i.deleteTeam(e).then(function(t){if(t.success){for(var i=0;i<r.teams.length;i++)if(r.teams[i].id==e)return r.teams.splice(i,1),void s.success(t.msg)}else s.warning(t.msg)},function(e){s.error(e)})})}function o(e,t){var i=r.filters[e].indexOf(t);-1==i?r.filters[e].push(t):r.filters[e].splice(i,1)}var r=this;r.userCreds=t.getSession(),r.userData={},r.teams=[],r.filters={cities:["La Paz","El Alto"],divisions:["Junior (de 10 a 14 años)","Senior (de 15 a 18 años)"],categories:["Educación"],teamThat:{requestMembers:!0,requestMentors:!0}},r.updateFilter=o,r.isLoading=!0,r.getTeams=n,r.deleteTeam=a,r.getTeams()}angular.module("heroesDigitalesApp").controller("TeamAdminCtrl",["User","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(e){t.getInfo(e).then(function(e){e.success&&(d.mentorData=e.user,d.isMemberInvited=d.hasInvited())},function(e){alert("Hubo un error")})}function r(t){d.authParams.hasTeam?(d.uploadInvitation.isLoading=!0,n.inviteToTeam({uid:t,teamId:d.authParams.teamId,role:d.mentorData.role_id}).then(function(t){t.success?(a.alert("Felicidades","La invitación fue enviada con éxito","OK",function(e){}),d.getMentorData(e.id),d.isMemberInvited=d.hasInvited()):a.warning(t.msg)},function(e){a.error("Hubo un error en el servidor")}),d.uploadInvitation.isLoading=!1):a.alert("Debes crear un equipo o unirte a uno","","Esta bien",function(e){})}function u(){for(var e=d.mentorData.invitations,t=0;t<e.length;t++)if(e[t].team_id==d.authParams.teamId)return d.mentorData.invitationId=e[t].invitation_id,!0;return!1}function c(){n.confirmInvitationFromTeam({invitationId:d.mentorData.invitationId,accept:!1}).then(function(t){t.success?(o(e.id),a.success("La invitación fue cancelada")):a.warning("Hubo un error al cancelar la invitación")},function(e){a.error("Hubo un error en el servidor, revise su conexión a internet")})}var d=this;d.mentorData={names:"",lastnames:"",img:"",email:"",birthDate:"",genre:"",school:"",city:"",zone:"",bio:""},d.uploadInvitation={isLoading:!1},d.isMemberInvited=!1,d.authParams=s.getSession(),d.getMentorData=o,d.inviteToTeam=r,d.hasInvited=u,d.cancelInvitation=c,o(e.id)}angular.module("heroesDigitalesApp").controller("MentorProfileCtrl",["$stateParams","User","Mentor","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i){function s(){a.isLoading=!0,i.getMentors(a.currentPage,{city:a.filters.cities,withTeam:a.filters.withTeam,mentorName:a.filters.mentorName}).then(function(e){if(e.success){a.isLoading=!1,a.mentors=e.mentors,a.total=e.pages,a.pagination=[];for(var t=0;t<e.pages;t++)a.pagination.push(t+1)}else a.isLoading=!1,alert(e.msg)},function(e){a.isLoading=!1,alert("Hubo un error al obtener a los mentores, inténtelo nuevmante")})}function n(e,t){if("TEXT"==t)return void s();if("withTeam"==e)return a.filters.withTeam=t,void s();var i=a.filters[e].indexOf(t);-1==i?a.filters[e].push(t):a.filters[e].splice(i,1),s()}var a=this;a.mentors=[],a.filters={cities:e.cities.split(","),withTeam:"true"===e.wteam,mentorName:e.mentor},a.total=0,a.pagination=[],a.currentPage=e.num,a.isLoading=!0,a.getMentors=s,a.updateFilter=n,s()}angular.module("heroesDigitalesApp").controller("MentorsCtrl",["$stateParams","User","Mentor",e])}(),function(){function e(e,t,i,s,n){function a(){var t={rid:e.id,token:e.token,signature:r.signature.name};n.parentAuth(t).then(function(e){$("#parentAuth").modal("show"),e.success?(r.sended.title="Felicitaciones",r.sended.msg=e.msg,r.sended.success=!0):(r.sended.title="Error en la verificación",r.sended.msg=e.msg,r.sended.success=!1)},function(e){s.error("Hubo un error al procesar la autorización, revise su conexión a internet")})}function o(e){e&&i(function(){t.go("home")},500)}var r=this;r.signature={name:""},r.sended={isLoading:!1,msg:"",title:"",success:!1},r.accept=a,r.redirect=o}angular.module("heroesDigitalesApp").controller("AuthParentsCtrl",["$stateParams","$state","$timeout","LxNotificationService","Student",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){o.isSubmited.state=!0,o.isSubmited.success.state=!1,s.confirmEmail(o.authParams).then(function(e){e.success?(e.already_verif&&t.go(e.path),n.setSession(e.uid,e.rid,e.username,e.token),t.go(e.path)):(o.isSubmited.success.msg=e.msg,o.isSubmited.success.state=!0,o.isSubmited.state=!1)},function(e){alert("Problema con el servidor, revise su conexión a internet")})}var o=this;o.authParams={uid:e.uid,token:e.token,email:e.email,password:""},o.isSubmited={state:!1,success:{state:!1,msg:""}},o.confirmRoute=a}angular.module("heroesDigitalesApp").controller("EmailConfirmationCtrl",["$stateParams","$state","$timeout","User","Auth",e])}(),function(){"use strict";function e(e,t,i,s){function n(){a.isSubmited.state=!1,a.isSubmited.isLoading=!0,i.sendVerifEmail(a.passwordParams).then(function(t){t.success?e.go("home.success-email-verif"):(a.isSubmited.state=!0,a.isSubmited.isLoading=!1,a.isSubmited.msg=t.msg)},function(e){alert("Hubo un error en el servidor")})}var a=this;a.passwordParams={password:""},a.isSubmited={state:!1,msg:"",isLoading:!1},a.sendEmail=n}angular.module("heroesDigitalesApp").controller("ForgotPasswordCtrl",["$state","$timeout","User","Auth",e])}(),function(){function e(e){function t(){e.getStages().then(function(e){e.success?i.stages=e.stages:alert(e.msg)},function(e){})}var i=this;i.getStages=t,i.organizers=["auspiciadores-02.png","auspiciadores-03.png"],i.sponsors=["auspiciadores-06.png","auspiciadores-05.png","auspiciadores-07.png","auspiciadores-08.jpg","auspiciadores-04.png","auspiciadores-10.png","auspiciadores-12.png","auspiciadores-13.jpg","auspiciadores-11.png"],i.getStages()}angular.module("heroesDigitalesApp").controller("HomeCtrl",["Stage",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){u.loginState.isNotLogged=!1,u.loginState.isLoading=!0,n.login(u.creds).then(function(i){i.success?(t(function(){e.go(i.path)},1e3),n.setSession(i.uid,i.rid,i.username,i.token,i.min_fields,i.has_team,i.team_id,i.is_leader),$("#login").modal("hide")):(u.loginState.isNotLogged=!0,u.loginState.isLoading=!1,u.loginState.msg=i.msg)},function(e){u.loginState.isNotLogged=!0,u.loginState.isLoading=!1,u.loginState.msg="Hubo un error al iniciar sesión, revise su conexión a internet e inténtelo nuevamente"})}function o(e){$("html, body").animate({scrollTop:$(e).offset().top-100},2e3)}function r(i){e.current==e.get("home.register")?(e.go("home"),t(function(){o(i)},50)):o(i)}var u=this;u.creds={email:"",password:""},u.loginState={isNotLogged:!1,msg:"",isLoading:!1},u.login=a,u.navigate=r;var o=o}angular.module("heroesDigitalesApp").controller("LoginCtrl",["$state","$timeout","$anchorScroll","$location","Auth",e])}(),function(){"use strict";function e(e,t){}angular.module("heroesDigitalesApp").controller("RegisterSuccessCtrl",["$state","$timeout",e])}(),function(){"use strict";function e(e,t,i){function s(){if(a.isSubmited.state=!1,!n(a.passwordParams.password,a.passwordParams.retype))return a.isSubmited.state=!0,void(a.isSubmited.msg="Las contraseñas no coinciden");a.isSubmited.isLoading=!0,i.resetPassword(a.passwordParams).then(function(t){t.success?e.go("home.success-reset-password"):(a.isSubmited.isLoading=!1,a.isSubmited.msg=t.msg,a.isSubmited.state=!1)},function(e){a.isSubmited.isLoading=!1,a.isSubmited.msg="Hubo un error en el servidor, inténtelo nuevamente",a.isSubmited.state=!0})}function n(e,t){return e==t}var a=this;a.passwordParams={password:"",retype:"",uid:t.id,token:t.token},a.isSubmited={state:!1,msg:"",isLoading:!1},a.resetPassword=s;var n=n}angular.module("heroesDigitalesApp").controller("ResetPasswordCtrl",["$state","$stateParams","User",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o,r){function u(e){"student"==e?I.typeParams.title="Estudiante":"mentor"==e?I.typeParams.title="Mentor":"judge"==e?I.typeParams.title="Juez":"expert"==e&&(I.typeParams.title="Experto")}function c(){s.getCities().then(function(e){e.success&&(I.cities=e.cities)},function(e){})}function d(){a.getGenres().then(function(e){e.success&&(I.genres=e.genres)},function(e){})}function l(){n.getShirts().then(function(e){e.success&&(I.shirts=e.shirts)},function(e){})}function g(){for(var e=1960;e<=2008;e++)I.dates.years.push(e)}function m(e,t){return e==t||(I.isNotRegistered.state=!0,I.isNotRegistered.msg="Su contraseña no coincide, escribala nuevamente",!1)}function f(){return I.isNotRegistered.state=!1,v(I.dataRegister.birthDate.day,I.dataRegister.birthDate.month,I.dataRegister.birthDate.year)?S(e.type,I.dataRegister.birthDate.year)?D(I.dataRegister.cellphone)?void(("judge"!=I.typeReg&&"expert"!=I.typeReg||I.validateSocialNetwork(I.dataRegister.socialNetwork)&&h(I.dataRegister.cv))&&m(I.dataRegister.password,I.dataRegister.retype)&&(I.isNotRegistered.state=!1,I.isNotRegistered.isLoading=!0,o.register(I.dataRegister).then(function(e){e.success?"NOT_SENDED"==e.emailSended?$("#registerSend").modal("show"):t.go("home.success-register"):(I.isNotRegistered.state=!0,I.isNotRegistered.isLoading=!1,I.isNotRegistered.msg=e.msg)},function(e){I.isNotRegistered.state=!0,I.isNotRegistered.isLoading=!1,I.isNotRegistered.msg="Hubo un error al realizar su registro, revise su conexión a internet e inténtelo nuevamente"}))):(I.isNotRegistered.state=!0,void(I.isNotRegistered.msg="Debe introducir un número de teléfono")):(I.isNotRegistered.state=!0,void(I.isNotRegistered.msg="Los estudiantes deben tener entre 10 y 18 años")):(I.isNotRegistered.state=!0,void(I.isNotRegistered.msg="Debe introducir una fecha de nacimiento"))}function p(e){return void 0==e||""==e||-1==e.search(/linkedin/i)&&-1==e.search(/facebook/i)?(I.isNotRegistered.state=!0,I.isNotRegistered.msg="Debes enlazar tu cuenta de Facebook o LinkedIn",!1):(I.isNotRegistered.state=!1,!0)}function h(e){return angular.equals(e,{})?(I.isNotRegistered.state=!0,I.isNotRegistered.msg="Debes subir tu curriculum vitae",!1):(I.isNotRegistered.state=!1,!0)}function v(e,t,i){return!!(Number(e)&&Number(t)&&Number(i))}function D(e){return!(!Number.isInteger(Number(e))||8!=e.length||"6"!=e.charAt(0)&&"7"!=e.charAt(0))}function S(e,t){var i=(new Date).getFullYear(),s=i-Number(t);return"student"!=e||!(s<10||s>18)}function b(){i(function(){t.go("home")},1500)}var I=this;I.getCities=c,I.getGenres=d,I.getShirts=l,I.generateYears=g,I.sendRegistration=f,I.validateSocialNetwork=p,I.returnHome=b;var u=u,m=m,h=h,v=v,D=D,S=S;I.typeReg=e.type,I.typeParams={},I.isNotRegistered={state:!1,msg:"",isLoading:!1},I.dataRegister={type:I.typeReg,typeRegister:e.typeRegister,teamId:e.teamId,names:"",lastnames:"",birthDate:{day:"Día",month:"Mes",year:"Año"},cellphone:"",cityId:1,zone:"",genreId:1,school:"",email:"",shirtId:1,socialNetwork:"",password:"",retype:"",org:"",job:"",profession:"",cv:{}},I.cities=[],I.schools=[],I.shirts=[],I.genres=[],I.dates={days:["Día","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],months:["Mes","01","02","03","04","05","06","07","08","09","10","11","12"],years:["Año"]},u(I.typeReg),c(),l(),d(),g()}angular.module("heroesDigitalesApp").controller("UserRegisterCtrl",["$stateParams","$state","$timeout","City","Shirt","Genre","Register","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(e){t.getInfo(e).then(function(e){e.success&&(d.studentData=e.user,d.isMemberInvited=d.hasInvited())},function(e){alert("Hubo un error")})}function r(t){d.authParams.hasTeam?(d.uploadInvitation.isLoading=!0,n.inviteToTeam({uid:t,teamId:d.authParams.teamId,role:d.studentData.role_id}).then(function(t){t.success?(a.alert("Felicidades","La invitación fue enviada con éxito","OK",function(e){}),d.getStudentData(e.id),d.isMemberInvited=d.hasInvited()):a.warning(t.msg)},function(e){a.error("Hubo un error en el servidor")}),d.uploadInvitation.isLoading=!1):a.alert("Debes crear un equipo o unirte a uno","","Esta bien",function(e){})}function u(){for(var e=d.studentData.invitations,t=0;t<e.length;t++)if(e[t].team_id==d.authParams.teamId)return d.studentData.invitationId=e[t].invitation_id,!0;return!1}function c(){n.confirmInvitationFromTeam({invitationId:d.studentData.invitationId,accept:!1}).then(function(t){t.success?(o(e.id),a.success("La invitación fue cancelada")):a.warning("Hubo un error al cancelar la invitación")},function(e){a.error("Hubo un error en el servidor, revise su conexión a internet")})}var d=this;d.studentData={names:"",lastnames:"",img:"",email:"",birthDate:"",genre:"",school:"",city:"",zone:"",bio:""},d.uploadInvitation={isLoading:!1},d.isMemberInvited=!1,d.authParams=s.getSession(),d.getStudentData=o,d.inviteToTeam=r,d.hasInvited=u,d.cancelInvitation=c,o(e.id)}angular.module("heroesDigitalesApp").controller("StudentProfileCtrl",["$stateParams","User","Student","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i){function s(){a.isLoading=!0,i.getStudentsPage(e.num,a.filters).then(function(e){if(e.success){a.isLoading=!1,a.pagination=[],a.students=e.students,a.total=e.pages;for(var t=0;t<e.pages;t++)a.pagination.push(t+1)}else a.isLoading=!1,alert(e.msg)},function(e){a.isLoading=!1,alert("Hubo un error al cargar los datos de los estudiantes, inténtelo nuevamente")})}function n(e,t){if("TEXT"==e)return void s();if("withTeam"==e)return a.filters.withTeam=t,void s();var i=a.filters[e].indexOf(t);-1==i?a.filters[e].push(t):a.filters[e].splice(i,1),s()}var a=this;a.students=[],a.filters={cities:e.city.split(","),gender:e.gender.split(","),withTeam:"true"==e.wteam,studentName:e.studentName},a.isLoading=!0,a.total=0,a.pagination=[],a.currentPage=e.num,a.getStudents=s,a.updateFilter=n,s()}angular.module("heroesDigitalesApp").controller("StudentsCtrl",["$stateParams","User","Student",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o,r,u){function c(){o.getCities().then(function(e){e.success&&(h.cities=e.cities)},function(e){})}function d(){r.getCategories().then(function(e){e.success?h.categories=e.categories:u.warning("Hubo un error al obtener los datos de categorías, inténtelo nuevamente")},function(e){u.error("Hubo un error al obtener los datos de categorías, revise su conexión a internet")})}function l(){a.getDivisions().then(function(e){e.success?h.divisions=e.divisions:u.warning("Hubo un error al cargar los datos de divisiones,inténtelo nuevamente")},function(e){u.error("Hubo un error, revise su conexión a internet")})}function g(){s.getTeam(t.id).then(function(e){e.success?(h.teamData=e.team,h.teamData.cityId=e.team.city.id,h.teamData.categoryId=null!=e.team.category?e.team.category.id:0,h.teamData.divisionId=e.team.division.id):u.warning(e.msg)},function(e){u.error("Hubo un error al obtener los datos del equipo, revise su conexión a internet")})}function m(){0!=h.teamData.divisionId&&0!=h.teamData.cityId||(h.isSubmited.state=!0,h.isSubmited.msg="No puede dejar los campos con * en vacío"),h.isSubmited.isLoading=!0,s.editTeam(h.teamData).then(function(i){h.isSubmited.isLoading=!1,i.success?e.go("user.team-profile",{id:t.id}):(h.isSubmited.state=!0,h.isSubmited.msg=i.msg)},function(e){u.error("Hubo un error al realizar los cambios, revise su conexión a internet")})}function f(e){for(var t=0;t<h.categories.length;t++)if(h.categories[t].id==e)return void(h.categoryDesc=h.categories[t].desc);h.categoryDesc="Debe seleccionar una categoría para el equipo"}function p(e){var t="/app/images/app-arts/categorias/";switch(e){case 1:return t+"1.png";case 2:return t+"3.png";case 3:return t+"2.png";default:return}}var h=this;h.getCities=c,h.getDivisions=l,h.getCategories=d,h.getTeamInfo=g,h.editTeam=m,h.matchCategoryDesc=f,h.chooseCategoryImg=p,h.isSubmited={state:!1,msg:"",isLoading:!1},h.teamData={idLeader:t.idLeader,team_name:"",project_name:"",project_desc:"",city_d:0,category_id:0},h.cities=[],h.divisions=[],h.categories=[],c(),d(),l(),g()}angular.module("heroesDigitalesApp").controller("EditTeamProfileCtrl",["$state","$stateParams","User","Team","Auth","Division","City","Category","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(e){i.getTeam(e).then(function(e){e.success&&(d.teamData=e.team)},function(e){alert("Hubo un error")})}function o(){if(!s.hasTeam())return void alert("Debes crear un equipo o unirte a uno")}function r(){d.uploadImg.isLoading=!0,null!=d.teamImg.newImg&&i.editTeamImg(d.teamImg).then(function(e){e.success&&(d.teamData.img=e.updated_img,d.teamImg.newImg=null),d.uploadImg.isLoading=!1},function(e){alert("Hubo un error en el servidor")})}function u(e){d.uploadRequest.isLoading=!0,i.requestJoin({idUser:d.userCreds.id,idTeam:e,role:d.userCreds.role}).then(function(e){e.success?(n.alert("FELICIDADES","Tu solicitud fue enviada con éxito, la respuesta llegará a tu correo electrónico","OK",function(e){}),d.requestHasSent()):(d.uploadRequest.msg=e.msg,d.uploadRequest.success=!1),d.uploadRequest.isLoading=!1},function(e){alert("Hubo un error en el servidor")})}function c(){t.requestHasSent(e.id,d.userCreds.id,d.userCreds.role).then(function(e){e.success?d.userHasSentReq=e.isSent:n.warning(e.msg)},function(e){n.error("Hubo un error en el servidor")})}var d=this;d.teamData={},d.userCreds=s.getSession(),d.hasTeam=d.userCreds.hasTeam,d.isMTeam={state:e.id==d.userCreds.teamId,isLeader:d.userCreds.isLeader,uid:d.userCreds.id},d.teamImg={id:e.id,newImg:null},d.uploadImg={isLoading:!1},d.uploadRequest={isLoading:!1,msg:"",success:!0},d.userHasSentReq=!1,d.getTeamData=a,d.inviteToTeam=o,d.updateTeamImg=r,d.joinTeam=u,d.requestHasSent=c,a(e.id),d.requestHasSent()}angular.module("heroesDigitalesApp").controller("TeamProfileCtrl",["$stateParams","User","Team","Auth","LxNotificationService",e])}(),function(){"use strict";function e(e){function t(){e.getTeams().then(function(e){e.success?(s.isLoading=!1,s.teams=e.teams):(alert(e.msg),s.isLoading=!1)},function(e){s.isLoading=!1,alert("Hubo un error al obtener a los equipos, inténtelo nuevamente")})}function i(e,t){var i=s.filters[e].indexOf(t);-1==i?s.filters[e].push(t):s.filters[e].splice(i,1)}var s=this;s.teams=[],s.filters={cities:["La Paz","El Alto"],divisions:["Junior (de 10 a 14 años)","Senior (de 15 a 18 años)"],categories:["Educación"],teamThat:{requestMembers:!0,requestMentors:!0}},s.getTeams=t,s.updateFilter=i,s.isLoading=!0,t()}angular.module("heroesDigitalesApp").controller("TeamsCtrl",["Team",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){t.getCities().then(function(e){e.success&&(d.cities=e.cities)},function(e){})}function r(){i.getCategories().then(function(e){e.success&&(d.categories=e.categories)},function(e){})}function u(){s.getDivisions().then(function(e){e.success&&(d.divisions=e.divisions)},function(e){})}function c(){if(0==d.dataRegister.cityId||0==d.dataRegister.divisionId)return d.isNotRegistered.state=!0,void(d.isNotRegistered.msg="Todos los campos son requeridos");d.isNotRegistered.state=!1,d.isNotRegistered.isLoading=!0,n.registerTeam(d.dataRegister).then(function(t){t.success?(a.setHasTeam(!0),a.setIsLeader(!0),a.setTeamId(t.team_id),e.go("user")):(d.isNotRegistered.state=!0,d.isNotRegistered.isLoading=!1,d.isNotRegistered.msg=t.msg)},function(e){d.isNotRegistered.state=!0,d.isNotRegistered.isLoading=!1,d.isNotRegistered.msg=data.msg})}var d=this;d.getCities=o,d.getDivisions=u,d.getCategories=r,d.sendRegistration=c,d.isNotRegistered={state:!1,msg:"",isLoading:!1},d.categoryDesc="",d.dataRegister={idLeader:a.getSession().id,teamName:"",cityId:0,divisionId:0,img:{}},d.cities=[],d.divisions=[],d.categories=[],o(),r(),u()}angular.module("heroesDigitalesApp").controller("CreateTeamCtrl",["$state","City","Category","Division","Team","Auth",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){n.getStages().then(function(e){e.success?f.stages=e.stages:alert(e.msg)},function(e){})}function r(){t.getInfo(f.userCreds.id).then(function(e){if(e.success){if(f.isUserDataLoaded=!0,f.userData=e.user,f.userData.invitations=!angular.equals(e.user.invitations,[])&&e.user.invitations,
f.userData.has_team)for(var t=0;t<f.userData.team.members.length;t++)f.userData.team.members[t].is_student?f.students.push(f.userData.team.members[t]):(f.menthors.push(f.userData.team.members[t]),f.userData.team.has_menthor=!0)}else alert(e.msg)},function(e){a.error("Hubo un error al descargar sus datos, revise su conexión a internet")})}function u(e,t){t?s.confirmRequestToJoin({reqId:e,accept:t}).then(function(e){e.success?(a.success("El participante fue adicionado a tu equipo"),f.students=[],f.mentors=[],f.getUserData()):a.warning(e.msg)},function(e){a.error("Hubo un error en el servidor")}):a.confirm("Rechazar solicitud","Estas seguro que deseas rechazar la solicitud del participante?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(i){i&&s.confirmRequestToJoin({reqId:e,accept:t}).then(function(e){e.success?(a.success("La solicitud fue eliminada"),f.getUserData()):a.warning(e.msg)},function(e){a.error("Hubo un error en el servidor")})})}function c(e,t,n){n?s.confirmInvitationFromTeam({invitationId:e,teamId:t,accept:n}).then(function(e){e.success?(a.success("Aceptaste la invitación del equipo"),f.getUserData(),i.setHasTeam(!0),i.setIsLeader(!1),i.setTeamId(e.team_id)):a.warning(e.msg)},function(e){a.error("Hubo un error en el servidor")}):a.confirm("Rechazar invitación","Estas seguro que deseas rechazar la invitación del equipo?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(o){o&&s.confirmInvitationFromTeam({invitationId:e,teamId:t,accept:n}).then(function(e){e.success?(a.success("La invitación fue eliminada"),i.setTeamId(t),i.setIsLeader(!1),i.setHasTeam(!0),f.userCreds=i.getSession(),f.getUserData()):a.warning(e.msg)},function(e){a.error("Hubo un error en el servidor")})})}function d(e,t){var i=void 0==t?null:t;a.confirm("Eliminar membresía","Estas seguro que deseas eliminar la membresía del participante?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(t){t&&s.deleteMembership(e,i).then(function(e){e.success?(f.students=[],f.mentors=[],f.getUserData(),a.success("El miembro fue eliminado")):a.warning(e.msg)},function(e){a.error("Hubo un error en el servidor")})})}function l(e){f.emailInvitation.teamId=f.userData.team.id,f.emailInvitation.type=e,f.emailInvitation.leaderId=f.userData.id;var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return""!=f.emailInvitation.mail&&i.test(f.emailInvitation.mail)?"mentor"==e&&f.userData.team.is_full_mentors?(f.emailInvitation.state.success=!0,void(f.emailInvitation.state.msg="Tú equipo ya tiene 2 mentores")):"student"==e&&f.userData.team.is_full_students?(f.emailInvitation.state.success=!0,void(f.emailInvitation.state.msg="Tú equipo ya tiene 4 estudiantes")):(f.emailInvitation.state.isLoading=!0,void t.sendEmailInvitation(f.emailInvitation).then(function(e){f.emailInvitation.state.isLoading=!1,e.success?($("#mailStudent").modal("hide"),$("#mailMentor").modal("hide"),f.emailInvitation.mail="",f.emailInvitation.state.success=!1,$("#invitationSend").modal("show"),f.sended.title="Invitación Enviada!",f.sended.msg=e.msg):(f.emailInvitation.state.success=!0,f.emailInvitation.state.msg=e.msg)},function(e){f.emailInvitation.state.msg="Hubo un problema al enviar la invitación",f.emailInvitation.state.success=!0,f.emailInvitation.state.isLoading=!1})):(f.emailInvitation.state.success=!0,void(f.emailInvitation.state.msg="Debes ingresar un correo electrónico"))}function g(){f.emailInvitation.state.success=!1,f.emailInvitation.mail=""}function m(e){s.confirmInvitationFromTeam({invitationId:e,accept:!1}).then(function(t){if(t.success){for(var i=0,s=f.userData.team.invitations_sent,n=0;n<s.length;n++)s[n].invitation_id==e&&(i=n);s.splice(i,1),a.success("La invitación fue cancelada")}else a.warning("Hubo un error al cancelar la invitación")},function(e){a.error("Hubo un error en el servidor, revise su conexión a internet")})}var f=this;f.userCreds=i.getSession(),f.userData={},f.menthors=[],f.students=[],f.isUserDataLoaded=!1,f.emailInvitation={mail:"",teamId:0,type:"",state:{isLoading:!1,msg:"",success:!1}},f.sended={msg:"",title:""},f.stages=[],f.getUserData=r,f.confirmRequest=u,f.confirmInvitation=c,f.deleteMembership=d,f.sendInvitationEmail=l,f.clearFields=g,f.getStages=o,f.cancelInvitation=m,r(),o()}angular.module("heroesDigitalesApp").controller("DashboardUserCtrl",["$scope","User","Auth","Team","Stage","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){t.getInfo(g.userCreds.id).then(function(e){e.success?(g.userData=e.user,g.userData.bio=g.userData.bio?g.userData.bio.name:""):alert(e.msg)},function(e){alert("Hubo un error al realizar los cambios")})}function r(){i.getCities().then(function(e){e.success&&(g.cities=e.cities)},function(e){})}function u(){n.getExpertises().then(function(e){e.success&&(g.expertises=e.expertises)},function(e){})}function c(){a.getSkills().then(function(e){e.success&&(g.skills=e.skills,g.skillsUser=e.skills)},function(e){})}function d(){if(!l(g.userData))return g.updateSuccess.state=!0,void(g.updateSuccess.msg="No puedes dejar los campos con * en vacío");if(1==g.userCreds.role)t.updateStudent(g.userData,g.userData.id).then(function(t){t.success?e.go("user.my-profile"):alert("Hubo un error, inténtelo nuevamente")},function(e){alert("Hubo un error en servidor, revise su conexión a internet")});else if(2==g.userCreds.role){var i=g.userData;i.skills=g.skillsUser,t.updateMenthor(i,g.userData.id).then(function(t){t.success?e.go("user.my-profile"):alert("Hubo un error, inténtelo nuevamente")},function(e){alert("Hubo un error en servidor, revise su conexión a internet")})}}function l(e){if(void 0==e.names||void 0==e.lastnames||void 0==e.zone||void 0==e.cellphone)return!1;if(1==e.role_id){if(""==e.student.school||void 0==e.student.school)return!1}else e.role_id;return!0}var g=this;g.userCreds=s.getSession(),g.userData={},g.cities=[],g.zones=[],g.skills=[],g.expertises=[],g.skillsUser=[],g.updateSuccess={state:!1,msg:""},g.getUserData=o,g.getCities=r,g.getSkills=c,g.getExpertises=u,g.update=d;var l=l;o(),r(),c(),u()}angular.module("heroesDigitalesApp").controller("EditProfileCtrl",["$state","User","City","Auth","Expertise","Skill",e])}(),function(){"use strict";function e(e,t){function i(){t.logout()}var s=this;s.userCreds=t.getSession(),s.hasMinFields=s.userCreds.minFields,s.logout=i}angular.module("heroesDigitalesApp").controller("HeaderUserCtrl",["User","Auth",e])}(),function(){"use strict";function e(e,t,i){function s(){t.acceptHonorCode({uid:n.userCreds.id,name:n.signature.name}).then(function(t){t.success?e.go("user"):alert("Hubo un error inténtelo nuevamente")},function(e){alert("Hubo un error en el servidor")})}var n=this;n.userCreds=i.getSession(),n.signature={name:""},n.accept=s}angular.module("heroesDigitalesApp").controller("HonorCodeCtrl",["$state","User","Auth",e])}(),function(){"use strict";function e(e,t){function i(){e.getInfo(n.userCreds.id).then(function(e){e.success?n.userData=e.user:alert(e.msg)},function(e){})}function s(){e.updateImage({img:n.userImg.newImg},n.userCreds.id).then(function(e){e.success&&(n.userImg.newImg=null,i())},function(e){})}var n=this;n.userCreds=t.getSession(),n.userData={},n.userImg={newImg:null},n.getUserData=i,n.updateImg=s,i()}angular.module("heroesDigitalesApp").controller("MyProfileCtrl",["User","Auth",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){r.sended.isLoading=!0,i.acceptParentsAuth({uid:r.userCreds.id,signature:r.parents.signature,email:r.parents.email}).then(function(e){$("#parentsModal").modal("show"),r.sended.isLoading=!1,r.sended.title=e.title,e.success?(r.parents={signature:"",email:""},r.sended.msg=e.msg,r.sended.success=!0):(r.sended.msg=e.msg,r.sended.success=!1)},function(e){n.error("Hubo un error en el servidor, revise su conexión a internet")})}function o(i){i&&t(function(){e.go("user")},500)}var r=this;r.userCreds=s.getSession(),r.parents={signature:"",email:""},r.sended={isLoading:!1,msg:"",title:"",success:!1},r.accept=a,r.redirect=o}angular.module("heroesDigitalesApp").controller("ParentsAuthCtrl",["$state","$timeout","User","Auth","LxNotificationService",e])}();