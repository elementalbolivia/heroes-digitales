!function(){"use strict";function e(e,t,i,s,n,a,o){function r(){i.getQuestions(o.checkpointId).then(function(e){e.success?f.questions=e.questions:alert(e.msg)},function(e){})}function u(){i.getCheckpoint(o.id,o.checkpointId).then(function(e){e.success?f.checkpoint=e.checkpoint:alert(e.msg)},function(e){})}function c(){if(0==f.checkpointQuestions.length)return f.isUploaded.state=!0,void(f.isUploaded.msg="Debes crear almenos una pregunta");f.isUploaded.isLoading=!0,f.isUploaded.state=!1,i.createQuestions(o.checkpointId,{questions:f.checkpointQuestions}).then(function(e){e.success?(f.getQuestions(),f.checkpointQuestions=[]):(f.isUploaded.isLoading=!1,f.isUploaded.state=!0,f.isUploaded.msg=e.msg)},function(e){f.isUploaded.isLoading=!1})}function d(){f.checkpointQuestions.push({id:Date.now(),type:{id:0,label:"Ninguno"},question:""})}function l(e){for(var t=0,i=0;i<f.checkpointQuestions.length;i++)if(f.checkpointQuestions[i].id==e){t=i;break}f.checkpointQuestions.splice(t,1)}function g(e){n.open(e)}function m(e,t){"BEGIN"==t?(f.newStage.beginDate.date=e,f.newStage.beginDate.formatted=moment(e).locale(f.newStage.locale).format("L")):(f.newStage.endDate.date=e,f.newStage.endDate.formatted=moment(e).locale(f.newStage.locale).format("L"))}var f=this;f.checkpoint={},f.questions=[],f.checkpointQuestions=[],f.isUploaded={state:!1,msg:"",isLoading:!1},f.getCheckpoint=u,f.getQuestions=r,f.addQuestion=d,f.deleteQuestion=l,f.createQuestions=c,f.openDatePicker=g,f.datePickerCallback=m,f.getQuestions(),f.getCheckpoint()}angular.module("heroesDigitalesApp").controller("CheckpointAdminCtrl",["User","Auth","Checkpoint","LxNotificationService","LxDatePickerService","$state","$stateParams",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){i.getStages().then(function(e){e.success?d.stages=e.stages:alert(e.msg)},function(e){})}function r(e){n.open(e)}function u(e,t){"BEGIN"==t?(d.newStage.beginDate.date=e,d.newStage.beginDate.formatted=moment(e).locale(d.newStage.locale).format("L")):(d.newStage.endDate.date=e,d.newStage.endDate.formatted=moment(e).locale(d.newStage.locale).format("L"))}function c(){d.isUploaded.isLoading=!0,d.isUploaded.state=!1;var e={name:d.newStage.name,desc:d.newStage.desc,beginDate:d.newStage.beginDate.formatted.split("/").reverse().join("-"),endDate:d.newStage.endDate.formatted.split("/").reverse().join("-")};i.createStage(e).then(function(e){e.success?a.go("admin.stage",{id:e.stageId}):(d.isUploaded.isLoading=!1,d.isUploaded.state=!0,d.isUploaded.msg=e.msg)},function(e){})}var d=this;d.stages=[],d.newStage={name:"",desc:"",locale:"es",minDate:new Date((new Date).getFullYear(),(new Date).getMonth()-2,(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth()+2,(new Date).getDate()),beginDate:{id:"_begin",date:new Date,formatted:moment().locale("es").format("L")},endDate:{id:"_end",date:new Date,formatted:moment().locale("es").format("L")}},d.isUploaded={state:!1,msg:"",isLoading:!1},d.getStages=o,d.openDatePicker=r,d.datePickerCallback=u,d.createStage=c,d.getStages()}angular.module("heroesDigitalesApp").controller("CreateStageAdminCtrl",["User","Auth","Stage","LxNotificationService","LxDatePickerService","$state",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){i.getStages().then(function(e){e.success?o.stages=e.stages:alert(e.msg)},function(e){})}var o=this;o.userCreds=t.getSession(),o.userData={},o.stages=[],o.getStages=a,o.getStages()}angular.module("heroesDigitalesApp").controller("DashboardAdminCtrl",["User","Auth","Stage","LxNotificationService","$state",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){s.getExperts().then(function(e){e.success?u.experts=e.experts:alert(e.msg)},function(e){})}function r(e,t){var i=t?"Esta seguro que desea aprobarlo para ser juez/experto?":"Esta seguro que desea rechazarlo para ser juez/experto?";a.confirm(i,"",{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(i){if(i){var s={id:e,accept:t};n.confirmRequest(s).then(function(e){e.success?(u.getExperts(),u.getJudges(),a.success("La acción fue realizada con éxito")):a.warn("Hubo un error al realizar la acción")},function(e){a.error("Hubo un error al realizar la acción")})}})}var u=this;u.userCreds=t.getSession(),u.userData={},u.experts=[],u.getExperts=o,u.processRequest=r,u.getExperts()}angular.module("heroesDigitalesApp").controller("ExpertAdminCtrl",["User","Auth","Team","Expert","Request","LxNotificationService",e])}(),function(){"use strict";function e(e){function t(){e.logout()}var i=this;i.userCreds=e.getSession(),i.logout=t}angular.module("heroesDigitalesApp").controller("HeaderAdminCtrl",["Auth",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){s.getJudges().then(function(e){e.success?u.judges=e.judges:alert(e.msg)},function(e){})}function r(e,t){var i=t?"Esta seguro que desea aprobarlo para ser juez/experto?":"Esta seguro que desea rechazarlo para ser juez/experto?";a.confirm(i,"",{cancel:"Cancelar",ok:"Si, deseo hacerlo"},function(i){if(i){var s={id:e,accept:t};n.confirmRequest(s).then(function(e){e.success?(u.getExperts(),u.getJudges(),a.success("La acción fue realizada con éxito")):a.warn("Hubo un error al realizar la acción")},function(e){a.error("Hubo un error al realizar la acción")})}})}var u=this;u.userCreds=t.getSession(),u.userData={},u.judges=[],u.getJudges=o,u.processRequest=r,u.getJudges()}angular.module("heroesDigitalesApp").controller("JudgeAdminCtrl",["User","Auth","Team","Judge","Request","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i){function s(){n.loginAdminState.isNotLogged=!1,n.loginAdminState.isLoading=!0,i.login(n.creds).then(function(t){t.success?(i.setSession(t.uid,t.rid,t.username,t.token,t.min_fields,t.has_team,t.team_id,t.is_leader),e.go(t.path)):(n.loginAdminState.isNotLogged=!0,n.loginAdminState.isLoading=!1,n.loginAdminState.msg=t.msg)},function(e){})}var n=this;n.creds={email:"",password:""},n.loginAdminState={isNotLogged:!1,msg:"",isLoading:!1},n.loginAdmin=s}angular.module("heroesDigitalesApp").controller("LoginAdminCtrl",["$state","$timeout","Auth",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o,r){function u(){s.getCheckpoints(r.id).then(function(e){e.success?m.checkpoints=e.checkpoints:alert(e.msg)},function(e){})}function c(){i.getStage(r.id).then(function(e){e.success&&(m.stage=e.stage)},function(e){})}function d(e){a.open(e)}function l(e,t){"EVAL"==t&&(m.newCheckpoint.evalDate.date=e,m.newCheckpoint.evalDate.formatted=moment(e).locale(m.newCheckpoint.locale).format("L"))}function g(){m.isUploaded.isLoading=!0,m.isUploaded.state=!1;var e={stageId:r.id,name:m.newCheckpoint.name,evalDate:m.newCheckpoint.evalDate.formatted.split("/").reverse().join("-")};s.createCheckpoint(e).then(function(e){e.success?o.go("admin.stage.checkpoint",{stageId:r.id,checkpointId:e.checkId}):(m.isUploaded.isLoading=!1,m.isUploaded.state=!0,m.isUploaded.msg=e.msg)},function(e){})}var m=this;m.checkpoints=[],m.stage={},m.isUploaded={state:!1,msg:"",isLoading:!1},m.newCheckpoint={name:"",locale:"es",minDate:new Date((new Date).getFullYear(),(new Date).getMonth()-2,(new Date).getDate()),maxDate:new Date((new Date).getFullYear(),(new Date).getMonth()+2,(new Date).getDate()),evalDate:{id:"_eval",date:new Date,formatted:moment().locale("es").format("L")}},m.getCheckpoints=u,m.getStage=c,m.openDatePicker=d,m.datePickerCallback=l,m.createCheckpoint=g,m.getCheckpoints(),m.getStage()}angular.module("heroesDigitalesApp").controller("StageAdminCtrl",["User","Auth","Stage","Checkpoit","LxNotificationService","LxDatePickerService","$state","$stateParams",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(e){t.getInfo(e).then(function(e){e.success&&(d.mentorData=e.user,d.isMemberInvited=d.hasInvited())},function(e){alert("Hubo un error")})}function r(t){d.authParams.hasTeam?(d.uploadInvitation.isLoading=!0,n.inviteToTeam({uid:t,teamId:d.authParams.teamId,role:d.mentorData.role_id}).then(function(t){t.success?(a.alert("Felicidades","La invitación fue enviada con éxito","OK",function(e){}),d.getMentorData(e.id),d.isMemberInvited=d.hasInvited()):a.warning(t.msg)},function(e){a.error("Hubo un error en el servidor")}),d.uploadInvitation.isLoading=!1):a.alert("Debes crear un equipo o unirte a uno","","Esta bien",function(e){})}function u(){for(var e=d.mentorData.invitations,t=0;t<e.length;t++)if(e[t].team_id==d.authParams.teamId)return d.mentorData.invitationId=e[t].invitation_id,!0;return!1}function c(){n.confirmInvitationFromTeam({invitationId:d.mentorData.invitationId,accept:!1}).then(function(t){t.success?(o(e.id),a.success("La invitación fue cancelada")):a.warning("Hubo un error al cancelar la invitación")},function(e){a.error("Hubo un error en el servidor, revise su conexión a internet")})}var d=this;d.mentorData={names:"",lastnames:"",img:"",email:"",birthDate:"",genre:"",school:"",city:"",zone:"",bio:""},d.uploadInvitation={isLoading:!1},d.isMemberInvited=!1,d.authParams=s.getSession(),d.getMentorData=o,d.inviteToTeam=r,d.hasInvited=u,d.cancelInvitation=c,o(e.id)}angular.module("heroesDigitalesApp").controller("MentorProfileCtrl",["$stateParams","User","Mentor","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t){function i(){t.getMentors().then(function(e){e.success?n.mentors=e.mentors:alert(e.msg)},function(e){})}function s(e,t){var i=n.filters[e].indexOf(t);-1==i?n.filters[e].push(t):n.filters[e].splice(i,1)}var n=this;n.mentors=[],n.filters={cities:["La Paz","El Alto"],withTeam:!0,skills:["AppInventor","Java","Android","Diseño","Documentación","Emprendimiento"]},n.getMentors=i,n.updateFilter=s,i()}angular.module("heroesDigitalesApp").controller("MentorsCtrl",["User","Mentor",e])}(),function(){function e(e,t,i,s){function n(){var n={rid:e.id,token:e.token};s.parentAuth(n).then(function(e){e.success?i.confirm("Felicitaciones",e.msg,{ok:"Ver página de inicio",cancel:"No gracias"},function(e){e&&t.go("home")}):i.warning(e.msg)},function(e){i.error("Hubo un error al procesar la autorización, revise su conexión a internet")})}this.accept=n}angular.module("heroesDigitalesApp").controller("AuthParentsCtrl",["$stateParams","$state","LxNotificationService","Student",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(){o.isSubmited.state=!0,o.isSubmited.success.state=!1,s.confirmEmail(o.authParams).then(function(e){e.success?(e.already_verif&&t.go(e.path),n.setSession(e.uid,e.rid,e.username,e.token),t.go(e.path)):(o.isSubmited.success.msg=e.msg,o.isSubmited.success.state=!0,o.isSubmited.state=!1)},function(e){alert("Problema con el servidor, revise su conexión a internet")})}var o=this;o.authParams={uid:e.uid,token:e.token,email:e.email,password:""},o.isSubmited={state:!1,success:{state:!1,msg:""}},o.confirmRoute=a}angular.module("heroesDigitalesApp").controller("EmailConfirmationCtrl",["$stateParams","$state","$timeout","User","Auth",e])}(),function(){"use strict";function e(e,t,i,s){function n(){a.isSubmited.state=!1,a.isSubmited.isLoading=!0,i.sendVerifEmail(a.passwordParams).then(function(t){t.success?e.go("home.success-email-verif"):(a.isSubmited.state=!0,a.isSubmited.isLoading=!1,a.isSubmited.msg=t.msg)},function(e){alert("Hubo un error en el servidor")})}var a=this;a.passwordParams={password:""},a.isSubmited={state:!1,msg:"",isLoading:!1},a.sendEmail=n}angular.module("heroesDigitalesApp").controller("ForgotPasswordCtrl",["$state","$timeout","User","Auth",e])}(),function(){function e(){var e=this;e.organizers=["auspiciadores-02.png","auspiciadores-03.png"],e.sponsors=["auspiciadores-04.png","auspiciadores-05.png","auspiciadores-06.png","auspiciadores-07.png","auspiciadores-08.png","auspiciadores-09.png","auspiciadores-10.png","auspiciadores-11.png"]}angular.module("heroesDigitalesApp").controller("HomeCtrl",[e])}(),function(){"use strict";function e(e,t,i){function s(){n.loginState.isNotLogged=!1,n.loginState.isLoading=!0,i.login(n.creds).then(function(s){s.success?(t(function(){e.go(s.path)},1e3),i.setSession(s.uid,s.rid,s.username,s.token,s.min_fields,s.has_team,s.team_id,s.is_leader),$("#login").modal("hide")):(n.loginState.isNotLogged=!0,n.loginState.isLoading=!1,n.loginState.msg=s.msg)},function(e){})}var n=this;n.creds={email:"",password:""},n.loginState={isNotLogged:!1,msg:"",isLoading:!1},n.login=s}angular.module("heroesDigitalesApp").controller("LoginCtrl",["$state","$timeout","Auth",e])}(),function(){"use strict";function e(e,t){}angular.module("heroesDigitalesApp").controller("RegisterSuccessCtrl",["$state","$timeout",e])}(),function(){"use strict";function e(e,t,i){function s(){if(!n(a.passwordParams.password,a.passwordParams.retype))return a.isSubmited.state=!0,void(a.isSubmited.msg="Las contraseñas no coinciden");a.isSubmited.state=!1,a.isSubmited.isLoading=!0,i.resetPassword(a.passwordParams).then(function(t){t.success?e.go("home.success-reset-password"):(a.isSubmited.isLoading=!1,a.isSubmited.msg=t.msg)},function(e){alert("Hubo un error en el servidor")})}function n(e,t){return e==t}var a=this;a.passwordParams={password:"",retype:"",uid:t.id,token:t.token},a.isSubmited={state:!1,msg:"",isLoading:!1},a.resetPassword=s;var n=n}angular.module("heroesDigitalesApp").controller("ResetPasswordCtrl",["$state","$stateParams","User",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o){function r(e){"student"==e?h.typeParams.title="Estudiante":"mentor"==e?h.typeParams.title="Mentor":"judge"==e?h.typeParams.title="Juez":"expert"==e&&(h.typeParams.title="Experto")}function u(){i.getCities().then(function(e){e.success&&(h.cities=e.cities)},function(e){})}function c(){n.getGenres().then(function(e){e.success&&(h.genres=e.genres)},function(e){})}function d(){s.getShirts().then(function(e){e.success&&(h.shirts=e.shirts)},function(e){})}function l(){for(var e=(new Date).getFullYear(),t=1960;t<=e;t++)h.dates.years.push(t)}function g(e,t){return e==t||(h.isNotRegistered.state=!0,h.isNotRegistered.msg="Su contraseña no coincide, escribala nuevamente",!1)}function m(){if(!Number.isInteger(Number(h.dataRegister.cellphone)))return h.isNotRegistered.state=!0,void(h.isNotRegistered.msg="Debe introducir un número de teléfono");("judge"!=h.typeReg&&"expert"!=h.typeReg||h.validateSocialNetwork(h.dataRegister.socialNetwork)&&p(h.dataRegister.cv))&&g(h.dataRegister.password,h.dataRegister.retype)&&(h.isNotRegistered.state=!1,h.isNotRegistered.isLoading=!0,a.register(h.dataRegister).then(function(e){e.success?"NOT_SENDED"==e.emailSended?o.alert("Felicitaciones",e.msg,"OK",function(e){t.go("home")}):t.go("home.success-register"):(h.isNotRegistered.state=!0,h.isNotRegistered.isLoading=!1,h.isNotRegistered.msg=e.msg)},function(e){h.isNotRegistered.state=!0,h.isNotRegistered.isLoading=!1,h.isNotRegistered.msg="Hubo un error al realizar su registro, revise su conexión a internet e inténtelo nuevamente"}))}function f(e){return void 0==e||""==e||-1==e.search(/linkedin/i)&&-1==e.search(/facebook/i)?(h.isNotRegistered.state=!0,h.isNotRegistered.msg="Debes enlazar tu cuenta de Facebook o LinkedIn",!1):(h.isNotRegistered.state=!1,!0)}function p(e){return angular.equals(e,{})?(h.isNotRegistered.state=!0,h.isNotRegistered.msg="Debes subir tu curriculum vitae",!1):(h.isNotRegistered.state=!1,!0)}var h=this;h.getCities=u,h.getGenres=c,h.getShirts=d,h.generateYears=l,h.sendRegistration=m,h.validateSocialNetwork=f;var r=r,g=g,p=p;h.typeReg=e.type,h.typeParams={},h.isNotRegistered={state:!1,msg:"",isLoading:!1},h.dataRegister={type:h.typeReg,names:"",lastnames:"",birthDate:{day:"Día",month:"Mes",year:"Año"},cellphone:"",cityId:0,zone:"",genreId:0,school:"",email:"",shirtId:0,socialNetwork:"",password:"",retype:"",org:"",job:"",profession:"",cv:{}},h.cities=[],h.schools=[],h.shirts=[],h.genres=[],h.dates={days:["Día","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],months:["Mes","01","02","03","04","05","06","07","08","09","10","11","12"],years:["Año"]},r(h.typeReg),u(),d(),c(),l()}angular.module("heroesDigitalesApp").controller("UserRegisterCtrl",["$stateParams","$state","City","Shirt","Genre","Register","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(e){t.getInfo(e).then(function(e){e.success&&(d.studentData=e.user,d.isMemberInvited=d.hasInvited())},function(e){alert("Hubo un error")})}function r(t){d.authParams.hasTeam?(d.uploadInvitation.isLoading=!0,n.inviteToTeam({uid:t,teamId:d.authParams.teamId,role:d.studentData.role_id}).then(function(t){t.success?(a.alert("Felicidades","La invitación fue enviada con éxito","OK",function(e){}),d.getStudentData(e.id),d.isMemberInvited=d.hasInvited()):a.warning(t.msg)},function(e){a.error("Hubo un error en el servidor")}),d.uploadInvitation.isLoading=!1):a.alert("Debes crear un equipo o unirte a uno","","Esta bien",function(e){})}function u(){for(var e=d.studentData.invitations,t=0;t<e.length;t++)if(e[t].team_id==d.authParams.teamId)return d.studentData.invitationId=e[t].invitation_id,!0;return!1}function c(){n.confirmInvitationFromTeam({invitationId:d.studentData.invitationId,accept:!1}).then(function(t){t.success?(o(e.id),a.success("La invitación fue cancelada")):a.warning("Hubo un error al cancelar la invitación")},function(e){a.error("Hubo un error en el servidor, revise su conexión a internet")})}var d=this;d.studentData={names:"",lastnames:"",img:"",email:"",birthDate:"",genre:"",school:"",city:"",zone:"",bio:""},d.uploadInvitation={isLoading:!1},d.isMemberInvited=!1,d.authParams=s.getSession(),d.getStudentData=o,d.inviteToTeam=r,d.hasInvited=u,d.cancelInvitation=c,o(e.id)}angular.module("heroesDigitalesApp").controller("StudentProfileCtrl",["$stateParams","User","Student","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t){function i(){t.getStudents().then(function(e){e.success?n.students=e.students:alert(e.msg)},function(e){})}function s(e,t){var i=n.filters[e].indexOf(t);-1==i?n.filters[e].push(t):n.filters[e].splice(i,1)}var n=this;n.students=[],n.filters={cities:["La Paz","El Alto"],withTeam:!0},n.getStudents=i,n.updateFilter=s,i()}angular.module("heroesDigitalesApp").controller("StudentsCtrl",["User","Student",e])}(),function(){"use strict";function e(e,t,i,s,n,a,o,r){function u(){o.getCities().then(function(e){e.success&&(f.cities=e.cities)},function(e){})}function c(){r.getCategories().then(function(e){e.success&&(f.categories=e.categories)},function(e){})}function d(){a.getDivisions().then(function(e){e.success&&(f.divisions=e.divisions)},function(e){})}function l(){s.getTeam(t.id).then(function(e){e.success&&(f.teamData=e.team,f.teamData.cityId=e.team.city.id,f.teamData.categoryId=e.team.category.id,f.teamData.divisionId=e.team.division.id)},function(e){alert("Hubo un error en el servidor")})}function g(){s.editTeam(f.teamData).then(function(i){i.success&&e.go("user.team-profile",{id:t.id})},function(e){})}function m(e){for(var t=0;t<f.categories.length;t++)if(f.categories[t].id==e)return void(f.categoryDesc=f.categories[t].desc);f.categoryDesc="Debe seleccionar una categoría para el equipo"}var f=this;f.getCities=u,f.getDivisions=d,f.getCategories=c,f.getTeamInfo=l,f.editTeam=g,f.matchCategoryDesc=m,f.isSubmited={state:!1,msg:"",isLoading:!1},f.teamData={idLeader:t.idLeader,team_name:"",project_name:"",project_desc:"",city_d:0,category_id:0,division_id:0},f.cities=[],f.divisions=[],f.categories=[],u(),c(),d(),l()}angular.module("heroesDigitalesApp").controller("EditTeamProfileCtrl",["$state","$stateParams","User","Team","Auth","Division","City","Category",e])}(),function(){"use strict";function e(e,t,i,s,n){function a(e){i.getTeam(e).then(function(e){e.success&&(d.teamData=e.team)},function(e){alert("Hubo un error")})}function o(){if(!s.hasTeam())return void alert("Debes crear un equipo o unirte a uno")}function r(){d.uploadImg.isLoading=!0,null!=d.teamImg.newImg&&i.editTeamImg(d.teamImg).then(function(e){e.success&&(d.teamData.img=e.updated_img,d.teamImg.newImg=null),d.uploadImg.isLoading=!1},function(e){alert("Hubo un error en el servidor")})}function u(e){d.uploadRequest.isLoading=!0,i.requestJoin({idUser:d.userCreds.id,idTeam:e,role:d.userCreds.role}).then(function(e){e.success?(n.alert("FELICIDADES","Tu solicitud fue enviada con éxito, la respuesta llegará a tu correo electrónico","OK",function(e){}),d.requestHasSent()):(d.uploadRequest.msg=e.msg,d.uploadRequest.success=!1),d.uploadRequest.isLoading=!1},function(e){alert("Hubo un error en el servidor")})}function c(){t.requestHasSent(e.id,d.userCreds.id,d.userCreds.role).then(function(e){e.success?d.userHasSentReq=e.isSent:n.warning(e.msg)},function(e){n.error("Hubo un error en el servidor")})}var d=this;d.teamData={},d.userCreds=s.getSession(),d.hasTeam=d.userCreds.hasTeam,d.isMTeam={state:e.id==d.userCreds.teamId,isLeader:d.userCreds.isLeader,uid:d.userCreds.id},d.teamImg={id:e.id,newImg:null},d.uploadImg={isLoading:!1},d.uploadRequest={isLoading:!1,msg:"",success:!0},d.userHasSentReq=!1,d.getTeamData=a,d.inviteToTeam=o,d.updateTeamImg=r,d.joinTeam=u,d.requestHasSent=c,a(e.id),d.requestHasSent()}angular.module("heroesDigitalesApp").controller("TeamProfileCtrl",["$stateParams","User","Team","Auth","LxNotificationService",e])}(),function(){"use strict";function e(e){function t(){e.getTeams().then(function(e){e.success?s.teams=e.teams:alert(e.msg)},function(e){})}function i(e,t){var i=s.filters[e].indexOf(t);-1==i?s.filters[e].push(t):s.filters[e].splice(i,1)}var s=this;s.teams=[],s.filters={cities:["La Paz","El Alto"],divisions:["Junior","Senior"],categories:["Medio ambiente"],teamThat:{requestMembers:!0,requestMentors:!0}},s.getTeams=t,s.updateFilter=i,t()}angular.module("heroesDigitalesApp").controller("TeamsCtrl",["Team",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){t.getCities().then(function(e){e.success&&(d.cities=e.cities)},function(e){})}function r(){i.getCategories().then(function(e){e.success&&(d.categories=e.categories)},function(e){})}function u(){s.getDivisions().then(function(e){e.success&&(d.divisions=e.divisions)},function(e){})}function c(){d.isNotRegistered.state=!1,d.isNotRegistered.isLoading=!0,n.registerTeam(d.dataRegister).then(function(t){t.success?(a.setHasTeam(!0),a.setIsLeader(!0),a.setTeamId(t.team_id),e.go("user")):(d.isNotRegistered.state=!0,d.isNotRegistered.isLoading=!1,d.isNotRegistered.msg=t.msg)},function(e){d.isNotRegistered.state=!0,d.isNotRegistered.isLoading=!1,d.isNotRegistered.msg=data.msg})}var d=this;d.getCities=o,d.getDivisions=u,d.getCategories=r,d.sendRegistration=c,d.isNotRegistered={state:!1,msg:"",isLoading:!1},d.categoryDesc="",d.dataRegister={idLeader:a.getSession().id,teamName:"",cityId:0,divisionId:0,img:{}},d.cities=[],d.divisions=[],d.categories=[],o(),r(),u()}angular.module("heroesDigitalesApp").controller("CreateTeamCtrl",["$state","City","Category","Division","Team","Auth",e])}(),function(){"use strict";function e(e,t,i,s){function n(){e.getInfo(u.userCreds.id).then(function(e){if(e.success){if(u.userData=e.user,u.userData.invitations=!angular.equals(e.user.invitations,[])&&e.user.invitations,u.userData.has_team)for(var t=0;t<u.userData.team.members.length;t++)u.userData.team.members[t].is_student?u.students.push(u.userData.team.members[t]):(u.menthors.push(u.userData.team.members[t]),u.userData.team.has_menthor=!0)}else alert(e.msg)},function(e){s.error("Hubo un error al descargar sus datos, revise su conexión a internet")})}function a(e,t){t?i.confirmRequestToJoin({reqId:e,accept:t}).then(function(e){e.success?(s.success("El participante fue adicionado a tu equipo"),u.getUserData()):s.warning(e.msg)},function(e){s.error("Hubo un error en el servidor")}):s.confirm("Rechazar solicitud","Estas seguro que deseas rechazar la solicitud del participante?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(n){n&&i.confirmRequestToJoin({reqId:e,accept:t}).then(function(e){e.success?(s.success("La solicitud fue eliminada"),u.getUserData()):s.warning(e.msg)},function(e){s.error("Hubo un error en el servidor")})})}function o(e,n,a){a?i.confirmInvitationFromTeam({invitationId:e,teamId:n,accept:a}).then(function(e){e.success?(s.success("Aceptaste la invitación del equipo"),u.getUserData(),t.setHasTeam(!0),t.setIsLeader(!1),t.setTeamId(e.team_id)):s.warning(e.msg)},function(e){s.error("Hubo un error en el servidor")}):s.confirm("Rechazar invitación","Estas seguro que deseas rechazar la invitación del equipo?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(o){o&&i.confirmInvitationFromTeam({invitationId:e,teamId:n,accept:a}).then(function(e){e.success?(s.success("La invitación fue eliminada"),t.setTeamId(n),t.setIsLeader(!1),t.setHasTeam(!0),u.userCreds=t.getSession(),u.getUserData()):s.warning(e.msg)},function(e){s.error("Hubo un error en el servidor")})})}function r(e,t){s.confirm("Eliminar membresía","Estas seguro que deseas eliminar la membresía del participante?",{cancel:"Cancelar",ok:"Si, quiero hacerlo"},function(n){n&&i.deleteMembership(e,t).then(function(e){e.success?(s.success("El miembro fue eliminado"),u.getUserData()):s.warning(e.msg)},function(e){s.error("Hubo un error en el servidor")})})}var u=this;u.userCreds=t.getSession(),u.userData={},u.menthors=[],u.students=[],u.getUserData=n,u.confirmRequest=a,u.confirmInvitation=o,u.deleteMembership=r,n()}angular.module("heroesDigitalesApp").controller("DashboardUserCtrl",["User","Auth","Team","LxNotificationService",e])}(),function(){"use strict";function e(e,t,i,s,n,a){function o(){t.getInfo(l.userCreds.id).then(function(e){e.success?(l.userData=e.user,l.userData.bio=l.userData.bio?l.userData.bio.name:""):alert(e.msg)},function(e){})}function r(){i.getCities().then(function(e){e.success&&(l.cities=e.cities)},function(e){})}function u(){n.getExpertises().then(function(e){e.success&&(l.expertises=e.expertises)},function(e){})}function c(){a.getSkills().then(function(e){e.success&&(l.skills=e.skills,l.skillsUser=e.skills)},function(e){})}function d(){if(1==l.userCreds.role)t.updateStudent(l.userData,l.userData.id).then(function(t){t.success?e.go("user.my-profile"):alert("Hubo un error, inténtelo nuevamente")},function(e){alert("Hubo un error en servidor, revise su conexión a internet")});else if(2==l.userCreds.role){var i=l.userData;i.skills=l.skillsUser,t.updateMenthor(i,l.userData.id).then(function(t){t.success?e.go("user.my-profile"):alert("Hubo un error, inténtelo nuevamente")},function(e){alert("Hubo un error en servidor, revise su conexión a internet")})}}var l=this;l.userCreds=s.getSession(),l.userData={},l.cities=[],l.zones=[],l.skills=[],l.expertises=[],l.skillsUser=[],l.getUserData=o,l.getCities=r,l.getSkills=c,l.getExpertises=u,l.update=d,o(),r(),c(),u()}angular.module("heroesDigitalesApp").controller("EditProfileCtrl",["$state","User","City","Auth","Expertise","Skill",e])}(),function(){"use strict";function e(e,t){function i(){t.logout()}var s=this;s.userCreds=t.getSession(),s.hasMinFields=s.userCreds.minFields,s.logout=i}angular.module("heroesDigitalesApp").controller("HeaderUserCtrl",["User","Auth",e])}(),function(){"use strict";function e(e,t,i){function s(){t.acceptHonorCode({uid:n.userCreds.id}).then(function(t){t.success?e.go("user"):alert("Hubo un error inténtelo nuevamente")},function(e){alert("Hubo un error en el servidor")})}var n=this;n.userCreds=i.getSession(),n.accept=s}angular.module("heroesDigitalesApp").controller("HonorCodeCtrl",["$state","User","Auth",e])}(),function(){"use strict";function e(e,t){function i(){e.getInfo(n.userCreds.id).then(function(e){e.success?n.userData=e.user:alert(e.msg)},function(e){})}function s(){e.updateImage({img:n.userImg.newImg},n.userCreds.id).then(function(e){e.success&&(n.userImg.newImg=null,i())},function(e){})}var n=this;n.userCreds=t.getSession(),n.userData={},n.userImg={newImg:null},n.getUserData=i,n.updateImg=s,i()}angular.module("heroesDigitalesApp").controller("MyProfileCtrl",["User","Auth",e])}(),function(){"use strict";function e(e,t,i,s){function n(){t.acceptParentsAuth({uid:a.userCreds.id,signature:a.parents.signature,email:a.parents.email}).then(function(t){t.success?s.confirm("Autorización enviada",t.msg,{ok:"Entiendo"},function(t){t&&e.go("user")}):alert(t.msg)},function(e){})}var a=this;a.userCreds=i.getSession(),a.parents={signature:"",email:""},a.accept=n}angular.module("heroesDigitalesApp").controller("ParentsAuthCtrl",["$state","User","Auth","LxNotificationService",e])}();